(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1172:function(t,e,s){"use strict";s.r(e);var n=s(2270),a=s(1902);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);var o=s(30),r=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=r.exports},1183:function(t,e,s){"use strict";s.r(e);var n=s(1184),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1184:function(t,e,s){"use strict";e.__esModule=!0,e.default={name:"list-construction",data:function(){return{}},props:{title:String}}},1186:function(t,e,s){"use strict";s.r(e);var n=s(1188),a=s(1183);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);var o=s(30),r=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=r.exports},1188:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home-main list-construction-model"},[s("div",{staticClass:"content-title"},[s("span",[t._v(t._s(t.title))]),t._v(" "),t._t("operation")],2),t._v(" "),s("div",{staticClass:"conditions-box"},[t._t("conditions")],2),t._v(" "),s("div",{staticClass:"list-box"},[t._t("content")],2)])},a=[]},1201:function(t,e,s){"use strict";s.r(e);var n=s(1202),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1202:function(t,e,s){"use strict";e.__esModule=!0;var n,a=s(83),i=(n=a)&&n.__esModule?n:{default:n};e.default={name:"popup",data:function(){return{spinnerLoading:!1,apDisabled:!1}},props:{okText:{type:String,default:""+i.default.$t("Confirm")},disabled:{type:Boolean,default:!1},asynLoading:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("close")},ok:function(){var t=this;this.asynLoading?(this.spinnerLoading=!0,this.$emit("ok",(function(){t.spinnerLoading=!1}))):this.$emit("ok")}},components:{}}},1212:function(t,e,s){},1222:function(t,e,s){"use strict";s.r(e);var n=s(1227),a=s(1201);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s(1223);var o=s(30),r=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=r.exports},1223:function(t,e,s){"use strict";s(1212)},1227:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup-model"},[s("div",{staticClass:"content-p"},[t._t("content")],2),t._v(" "),s("div",{staticClass:"bottom-p"},[s("el-button",{attrs:{type:"text",size:"mini",round:"",disabled:t.disabled},on:{click:function(e){return t.close()}}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",round:"",loading:t.spinnerLoading,disabled:t.disabled||t.apDisabled},on:{click:function(e){return t.ok()}}},[t._v(t._s(t.spinnerLoading?"Loading...":t.okText)+" ")])],1)])},a=[]},1450:function(t,e,s){"use strict";s.r(e);var n=s(1451),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1451:function(t,e,s){"use strict";e.__esModule=!0;var n=l(s(94)),a=l(s(83)),i=l(s(196)),o=l(s(742)),r=l(s(1222)),u=l(s(370));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"create-user",data:function(){return{store:i.default,router:o.default,queueList:[],userName:"",userPassword:"",tenantId:"",queueName:"",email:"",phone:"",userState:"1",tenantList:[],isADMIN:"ADMIN_USER"===i.default.state.user.userInfo.userType&&"account"!==o.default.history.current.name}},props:{item:Object},methods:{_ok:function(){var t=this;if(this._verification()){if(this.item&&this.item.groupName===this.groupName)return void this._submit();this.store.dispatch("security/verifyName",{type:"user",userName:this.userName}).then((function(e){t._submit()})).catch((function(e){t.$message.error(e.msg||"")}))}},_verification:function(){var t=/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?![`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]+$)[`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、0-9A-Za-z]{6,22}$/,e=this.userName.length;if(e<3||e>39)return this.$message.warning(""+a.default.$t("User name length is between 3 and 39")),!1;if(!this.userName.replace(/\s*/g,""))return this.$message.warning(""+a.default.$t("Please enter user name")),!1;if(""!==this.userPassword&&this.item){if(!t.test(this.userPassword))return this.$message.warning(""+a.default.$t("Password consists of at least two combinations of numbers, letters, and characters, and the length is between 6-22")),!1}else if(!this.item&&!t.test(this.userPassword))return this.$message.warning(""+a.default.$t("Password consists of at least two combinations of numbers, letters, and characters, and the length is between 6-22")),!1;return this.email?/^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,}$/.test(this.email)?!(this.phone&&!/^1(3|4|5|6|7|8)\d{9}$/.test(this.phone))||(this.$message.warning(""+a.default.$t("Please enter the correct mobile phone format")),!1):(this.$message.warning(""+a.default.$t("Please enter the correct email format")),!1):(this.$message.warning(""+a.default.$t("Please enter email")),!1)},_getQueueList:function(){var t=this;return new Promise((function(e,s){t.store.dispatch("security/getQueueList").then((function(s){t.queueList=n.default.map(s,(function(t){return{id:t.id,code:t.queueName}})),t.$nextTick((function(){t.queueName=t.queueList[0].id})),e()}))}))},_getTenantList:function(){var t=this;return new Promise((function(e,s){t.store.dispatch("security/getTenantList").then((function(s){var a=n.default.filter(s,(function(t){return-1!==t.id}));t.tenantList=n.default.map(a,(function(t){return{id:t.id,code:t.tenantCode}})),t.$nextTick((function(){t.tenantList.length&&(t.tenantId=t.tenantList[0].id)})),e()}))}))},_submit:function(){var t=this;this.$refs.popover.spinnerLoading=!0;var e="";""!==this.queueName&&(e=this.queueList.length>0?n.default.find(this.queueList,["id",this.queueName]).code:"");var s={userName:this.userName,userPassword:this.userPassword,tenantId:this.tenantId,email:this.email,queue:e,phone:this.phone,state:this.userState};this.item&&(s.id=this.item.id),this.store.dispatch("security/"+(this.item?"updateUser":"createUser"),s).then((function(e){t.$refs.popover.spinnerLoading=!1,t.$emit("onUpdate",s),t.$message.success(e.msg)})).catch((function(e){t.$message.error(e.msg||""),t.$refs.popover.spinnerLoading=!1}))},close:function(){this.$emit("close")}},watch:{},created:function(){var t=this;if(this.isADMIN)Promise.all([this._getQueueList(),this._getTenantList()]).then((function(){t.item&&(t.userName=t.item.userName,t.userPassword="",t.email=t.item.email,t.phone=t.item.phone,t.userState=t.item.state+""||"1",t.item.tenantId&&(t.tenantId=t.item.tenantId),t.$nextTick((function(){var e=n.default.find(t.queueList,["code",t.item.queue]);e&&(t.queueName=e.id||"")})))}));else if(this.item)if(this.userName=this.item.userName,this.userPassword="",this.email=this.item.email,this.phone=this.item.phone,this.userState=this.state+""||"1",this.item.tenantId&&(this.tenantId=this.item.tenantId),this.queueList.length>0){var e=n.default.find(this.queueList,["code",this.item.queue]);e&&(this.queueName=e.id||"")}else this.queueName=""},mounted:function(){},components:{mPopover:r.default,mListBoxF:u.default}}},1870:function(t,e,s){"use strict";s.r(e);var n=s(1942),a=s(1450);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);var o=s(30),r=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=r.exports},1902:function(t,e,s){"use strict";s.r(e);var n=s(1903),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1903:function(t,e,s){"use strict";e.__esModule=!0;var n=i(s(2217)),a=i(s(1186));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"account-index",mounted:function(){},components:{mListConstruction:a.default,mInfo:n.default}}},1904:function(t,e,s){"use strict";s.r(e);var n=s(1905),a=s.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);e.default=a.a},1905:function(t,e,s){"use strict";e.__esModule=!0;var n=s(650),a=o(s(370)),i=o(s(1870));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"user-info",data:function(){return{createUserDialog:!1,item:{}}},props:{},methods:Object.assign({},(0,n.mapMutations)("user",["setUserInfo"]),{_edit:function(){this.item=this.userInfo,this.createUserDialog=!0},onUpdate:function(t){this.setUserInfo({userName:t.userName,userPassword:t.userPassword,email:t.email,phone:t.phone}),this.createUserDialog=!1},close:function(){this.createUserDialog=!1}}),watch:{},created:function(){},mounted:function(){},computed:Object.assign({},(0,n.mapState)("user",["userInfo"])),components:{mListBoxF:a.default,mCreateUser:i.default}}},1942:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("m-popover",{ref:"popover",attrs:{"ok-text":t.item?t.$t("Edit"):t.$t("Submit")},on:{ok:t._ok,close:t.close}},[s("template",{slot:"content"},[s("div",{staticClass:"create-user-model"},[s("m-list-box-f",[s("template",{slot:"name"},[s("strong",[t._v("*")]),t._v(t._s(t.$t("User Name")))]),t._v(" "),s("template",{slot:"content"},[s("el-input",{attrs:{type:"input",maxlength:"60",size:"small",placeholder:t.$t("Please enter user name")},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1)],2),t._v(" "),"account"!==t.router.history.current.name?s("m-list-box-f",[s("template",{slot:"name"},[s("strong",[t._v("*")]),t._v(t._s(t.$t("Password")))]),t._v(" "),s("template",{slot:"content"},[s("el-input",{attrs:{type:"password",size:"small",placeholder:t.$t("Please enter your password")},model:{value:t.userPassword,callback:function(e){t.userPassword=e},expression:"userPassword"}})],1)],2):t._e(),t._v(" "),t.isADMIN?s("m-list-box-f",[s("template",{slot:"name"},[s("strong",[t._v("*")]),t._v(t._s(t.$t("Tenant")))]),t._v(" "),s("template",{slot:"content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.tenantId,callback:function(e){t.tenantId=e},expression:"tenantId"}},t._l(t.tenantList,(function(t){return s("el-option",{key:t.id,attrs:{value:t.id,label:t.code}})})),1)],1)],2):t._e(),t._v(" "),t.isADMIN?s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Queue")))]),t._v(" "),s("template",{slot:"content"},[s("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},scopedSlots:t._u([{key:"trigger",fn:function(e){var n=e.selectedModel;return s("el-input",{attrs:{readonly:"",placeholder:t.$t("Please select a queue"),value:n?n.label:""},on:{"on-click-icon":function(e){e.stopPropagation(),t.queueName=""}}},[s("em",{directives:[{name:"show",rawName:"v-show",value:""==t.queueName,expression:"queueName ==''"}],staticClass:"el-icon-error",staticStyle:{"font-size":"15px",cursor:"pointer"},attrs:{slot:"suffix"},slot:"suffix"}),t._v(" "),s("em",{directives:[{name:"show",rawName:"v-show",value:""!=t.queueName,expression:"queueName!=''"}],staticClass:"el-icon-bottom",staticStyle:{"font-size":"12px"},attrs:{slot:"suffix"},slot:"suffix"})])}}],null,!1,4160169790),model:{value:t.queueName,callback:function(e){t.queueName=e},expression:"queueName"}},[t._v(" "),t._l(t.queueList,(function(t){return s("el-option",{key:t.id,attrs:{value:t.id,label:t.code}})}))],2)],1)],2):t._e(),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[s("strong",[t._v("*")]),t._v(t._s(t.$t("Email")))]),t._v(" "),s("template",{slot:"content"},[s("el-input",{attrs:{type:"input",size:"small",placeholder:t.$t("Please enter email")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Phone")))]),t._v(" "),s("template",{slot:"content"},[s("el-input",{attrs:{type:"input",size:"small",placeholder:t.$t("Please enter phone number")},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],2),t._v(" "),s("m-list-box-f",{staticStyle:{"line-height":"38px"}},[s("template",{slot:"name"},[t._v(t._s(t.$t("State")))]),t._v(" "),s("template",{slot:"content"},[s("el-radio-group",{attrs:{size:"small"},model:{value:t.userState,callback:function(e){t.userState=e},expression:"userState"}},[s("el-radio",{attrs:{label:"1"}},[t._v(t._s(t.$t("Enable")))]),t._v(" "),s("el-radio",{attrs:{label:"0"}},[t._v(t._s(t.$t("Disable")))])],1)],1)],2)],1)])],2)},a=[]},2016:function(t,e,s){},2217:function(t,e,s){"use strict";s.r(e);var n=s(2313),a=s(1904);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);s(2218);var o=s(30),r=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);e.default=r.exports},2218:function(t,e,s){"use strict";s(2016)},2270:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("m-list-construction",{attrs:{title:this.$t("User Information")}},[e("template",{slot:"content"},[e("m-info")],1)],2)},a=[]},2313:function(t,e,s){"use strict";s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-info-model"},[s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("User Name")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.userName))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Email")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.email))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Phone")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.phone))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Permission")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s("GENERAL_USER"===t.userInfo.userType?""+t.$t("Ordinary users"):""+t.$t("Administrator")))])])],2),t._v(" "),s("m-list-box-f",{directives:[{name:"ps",rawName:"v-ps",value:["GENERAL_USER"],expression:"['GENERAL_USER']"}]},[s("template",{slot:"name"},[t._v(t._s(t.$t("Tenant")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.tenantCode))])])],2),t._v(" "),s("m-list-box-f",{directives:[{name:"ps",rawName:"v-ps",value:["GENERAL_USER"],expression:"['GENERAL_USER']"}]},[s("template",{slot:"name"},[t._v(t._s(t.$t("Queue")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t.userInfo.queueName))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Create Time")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t._f("formatDate")(t.userInfo.createTime)))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(t._s(t.$t("Update Time")))]),t._v(" "),s("template",{slot:"content"},[s("span",{staticClass:"sp1"},[t._v(t._s(t._f("formatDate")(t.userInfo.updateTime)))])])],2),t._v(" "),s("m-list-box-f",[s("template",{slot:"name"},[t._v(" ")]),t._v(" "),s("template",{slot:"content"},[s("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(e){return t._edit()}}},[t._v(t._s(t.$t("Edit")))]),t._v(" "),t.createUserDialog?s("el-dialog",{attrs:{title:t.item?t.$t("Edit User"):t.$t("Create User"),visible:t.createUserDialog,width:"auto"},on:{"update:visible":function(e){t.createUserDialog=e}}},[s("m-create-user",{attrs:{item:t.item},on:{onUpdate:t.onUpdate,close:t.close}})],1):t._e()],1)],2)],1)},a=[]}}]);