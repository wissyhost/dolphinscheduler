{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1164:function(t,e,n){\"use strict\";n.r(e);var i=n(2262),a=n(1856);for(var s in a)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n(30),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},1183:function(t,e,n){\"use strict\";n.r(e);var i=n(1184),a=n.n(i);for(var s in i)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},1184:function(t,e,n){\"use strict\";e.__esModule=!0,e.default={name:\"list-construction\",data:function(){return{}},props:{title:String}}},1186:function(t,e,n){\"use strict\";n.r(e);var i=n(1188),a=n(1183);for(var s in a)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n(30),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},1188:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i})),n.d(e,\"b\",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"home-main list-construction-model\"},[n(\"div\",{staticClass:\"content-title\"},[n(\"span\",[t._v(t._s(t.title))]),t._v(\" \"),t._t(\"operation\")],2),t._v(\" \"),n(\"div\",{staticClass:\"conditions-box\"},[t._t(\"conditions\")],2),t._v(\" \"),n(\"div\",{staticClass:\"list-box\"},[t._t(\"content\")],2)])},a=[]},1201:function(t,e,n){\"use strict\";n.r(e);var i=n(1202),a=n.n(i);for(var s in i)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},1202:function(t,e,n){\"use strict\";e.__esModule=!0;var i,a=n(83),s=(i=a)&&i.__esModule?i:{default:i};e.default={name:\"popup\",data:function(){return{spinnerLoading:!1,apDisabled:!1}},props:{okText:{type:String,default:\"\"+s.default.$t(\"Confirm\")},disabled:{type:Boolean,default:!1},asynLoading:{type:Boolean,default:!1}},methods:{close:function(){this.$emit(\"close\")},ok:function(){var t=this;this.asynLoading?(this.spinnerLoading=!0,this.$emit(\"ok\",(function(){t.spinnerLoading=!1}))):this.$emit(\"ok\")}},components:{}}},1205:function(t,e,n){\"use strict\";e.__esModule=!0;var i,a=n(94),s=(i=a)&&i.__esModule?i:{default:i},o=n(1218);e.default={watch:{searchParams:{deep:!0,handler:function(){(0,o.setUrlParams)(this.searchParams),this._debounceGET()}}},created:function(){s.default.isEmpty(this.$route.query)||(this.searchParams=s.default.assign(this.searchParams,this.$route.query))},mounted:function(){this._debounceGET()},methods:{_debounceGET:s.default.debounce((function(t){this._getList(t)}),100,{leading:!1,trailing:!0})}}},1212:function(t,e,n){},1222:function(t,e,n){\"use strict\";n.r(e);var i=n(1227),a=n(1201);for(var s in a)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n(1223);var o=n(30),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},1223:function(t,e,n){\"use strict\";n(1212)},1227:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i})),n.d(e,\"b\",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"popup-model\"},[n(\"div\",{staticClass:\"content-p\"},[t._t(\"content\")],2),t._v(\" \"),n(\"div\",{staticClass:\"bottom-p\"},[n(\"el-button\",{attrs:{type:\"text\",size:\"mini\",round:\"\",disabled:t.disabled},on:{click:function(e){return t.close()}}},[t._v(\" \"+t._s(t.$t(\"Cancel\"))+\" \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\",size:\"mini\",round:\"\",loading:t.spinnerLoading,disabled:t.disabled||t.apDisabled},on:{click:function(e){return t.ok()}}},[t._v(t._s(t.spinnerLoading?\"Loading...\":t.okText)+\" \")])],1)])},a=[]},1856:function(t,e,n){\"use strict\";n.r(e);var i=n(1857),a=n.n(i);for(var s in i)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},1857:function(t,e,n){\"use strict\";e.__esModule=!0;var i=m(n(94)),a=n(650),s=m(n(2200)),o=m(n(196)),r=m(n(1196)),u=m(n(2201)),c=m(n(1193)),l=m(n(1205)),d=m(n(1219)),f=m(n(1186));function m(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"tenement-index\",data:function(){return{total:null,isLoading:!0,tenementList:[],searchParams:{pageSize:10,pageNo:1,searchVal:\"\"},isLeft:!0,isADMIN:\"ADMIN_USER\"===o.default.state.user.userInfo.userType,createTenementDialog:!1,item:{}}},mixins:[l.default],props:{},methods:Object.assign({},(0,a.mapActions)(\"security\",[\"getTenantListP\"]),{_onConditions:function(t){this.searchParams=i.default.assign(this.searchParams,t),this.searchParams.pageNo=1},_page:function(t){this.searchParams.pageNo=t},_pageSize:function(t){this.searchParams.pageSize=t},_onUpdate:function(){this._debounceGET()},_onEdit:function(t){this._create(t)},_create:function(t){this.createTenementDialog=!0,this.item=t},onUpdate:function(){this._debounceGET(\"false\"),this.createTenementDialog=!1},close:function(){this.createTenementDialog=!1},_getList:function(t){var e=this;0===sessionStorage.getItem(\"isLeft\")?this.isLeft=!1:this.isLeft=!0,this.isLoading=!t,this.getTenantListP(this.searchParams).then((function(t){e.searchParams.pageNo>1&&0===t.totalList.length?e.searchParams.pageNo=e.searchParams.pageNo-1:(e.tenementList=[],e.tenementList=t.totalList,e.total=t.total,e.isLoading=!1)})).catch((function(t){e.isLoading=!1}))}}),watch:{$route:function(t){this.searchParams.pageNo=i.default.isEmpty(t.query)?1:t.query.pageNo}},created:function(){},mounted:function(){},beforeDestroy:function(){sessionStorage.setItem(\"isLeft\",1)},components:{mList:s.default,mListConstruction:f.default,mConditions:d.default,mSpin:r.default,mNoData:c.default,mCreateTenement:u.default}}},1858:function(t,e,n){\"use strict\";n.r(e);var i=n(1859),a=n.n(i);for(var s in i)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},1859:function(t,e,n){\"use strict\";e.__esModule=!0;var i=n(650);e.default={name:\"tenement-list\",data:function(){return{list:[]}},props:{tenementList:Array,pageNo:Number,pageSize:Number},methods:Object.assign({},(0,i.mapActions)(\"security\",[\"deleteQueue\"]),{_delete:function(t,e){var n=this;this.deleteQueue({id:t.id}).then((function(t){n.$emit(\"on-update\"),n.$message.success(t.msg)})).catch((function(t){n.$message.error(t.msg||\"\")}))},_edit:function(t){this.$emit(\"on-edit\",t)}}),watch:{tenementList:function(t){var e=this;this.list=[],setTimeout((function(){e.list=t}))}},created:function(){this.list=this.tenementList},mounted:function(){},components:{}}},1860:function(t,e,n){\"use strict\";n.r(e);var i=n(1861),a=n.n(i);for(var s in i)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e.default=a.a},1861:function(t,e,n){\"use strict\";e.__esModule=!0;var i=u(n(94)),a=u(n(83)),s=u(n(196)),o=u(n(1222)),r=u(n(370));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"create-tenement\",data:function(){return{store:s.default,queueList:[],queueId:\"\",tenantCode:\"\",description:\"\"}},props:{item:Object},methods:{_ok:function(){var t=this;if(this._verification()){if(this.item&&this.item.groupName===this.groupName)return void this._submit();this.store.dispatch(\"security/verifyName\",{type:\"tenant\",tenantCode:this.tenantCode}).then((function(e){t._submit()})).catch((function(e){t.$message.error(e.msg||\"\")}))}},_getQueueList:function(){var t=this;return new Promise((function(e,n){t.store.dispatch(\"security/getQueueList\").then((function(n){t.queueList=i.default.map(n,(function(t){return{id:t.id,code:t.queueName}})),t.$nextTick((function(){t.queueId=t.queueList[0].id})),e()}))}))},_verification:function(){return this.tenantCode.replace(/\\s*/g,\"\")?!(!/^[0-9a-zA-Z_.-]{1,}$/.test(this.tenantCode)||i.default.startsWith(this.tenantCode,\"_\",0)||i.default.startsWith(this.tenantCode,\".\",0))||(this.$message.warning(\"\"+a.default.$t(\"Please enter os tenant code in English\")),!1):(this.$message.warning(\"\"+a.default.$t(\"Please enter the os tenant code in English\")),!1)},_submit:function(){var t=this,e={tenantCode:this.tenantCode,queueId:this.queueId,description:this.description};this.item&&(e.id=this.item.id),this.$refs.popover.spinnerLoading=!0,this.store.dispatch(\"security/\"+(this.item?\"updateQueue\":\"createQueue\"),e).then((function(e){t.$emit(\"onUpdate\"),t.$message.success(e.msg),t.$refs.popover.spinnerLoading=!1})).catch((function(e){t.$message.error(e.msg||\"\"),t.$refs.popover.spinnerLoading=!1}))},close:function(){this.$emit(\"close\")}},watch:{},created:function(){var t=this;this._getQueueList().then((function(e){t.item&&(t.$nextTick((function(){t.queueId=t.item.queueId})),t.tenantCode=t.item.tenantCode,t.description=t.item.description)}))},mounted:function(){},components:{mPopover:o.default,mListBoxF:r.default}}},2200:function(t,e,n){\"use strict\";n.r(e);var i=n(2302),a=n(1858);for(var s in a)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n(30),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},2201:function(t,e,n){\"use strict\";n.r(e);var i=n(2303),a=n(1860);for(var s in a)[\"default\"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o=n(30),r=Object(o.a)(a.default,i.a,i.b,!1,null,null,null);e.default=r.exports},2262:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i})),n.d(e,\"b\",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"m-list-construction\",{attrs:{title:t.$t(\"Tenant Manage\")}},[n(\"template\",{slot:\"conditions\"},[n(\"m-conditions\",{on:{\"on-conditions\":t._onConditions}},[t.isADMIN?n(\"template\",{slot:\"button-group\"},[n(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(e){return t._create(\"\")}}},[t._v(t._s(t.$t(\"Create Tenant\")))]),t._v(\" \"),t.createTenementDialog?n(\"el-dialog\",{attrs:{title:t.item?t.$t(\"Edit Tenant\"):t.$t(\"Create Tenant\"),visible:t.createTenementDialog,width:\"auto\"},on:{\"update:visible\":function(e){t.createTenementDialog=e}}},[n(\"m-create-tenement\",{attrs:{item:t.item},on:{onUpdate:t.onUpdate,close:t.close}})],1):t._e()],1):t._e()],2)],1),t._v(\" \"),n(\"template\",{slot:\"content\"},[t.tenementList.length||t.total>0?[n(\"m-list\",{attrs:{\"tenement-list\":t.tenementList,\"page-no\":t.searchParams.pageNo,\"page-size\":t.searchParams.pageSize},on:{\"on-edit\":t._onEdit,\"on-update\":t._onUpdate}}),t._v(\" \"),n(\"div\",{staticClass:\"page-box\"},[n(\"el-pagination\",{attrs:{background:\"\",\"page-size\":t.searchParams.pageSize,\"current-page\":t.searchParams.pageNo,\"page-sizes\":[10,30,50],layout:\"sizes, prev, pager, next, jumper\",total:t.total},on:{\"current-change\":t._page,\"size-change\":t._pageSize,\"update:currentPage\":function(e){return t.$set(t.searchParams,\"pageNo\",e)},\"update:current-page\":function(e){return t.$set(t.searchParams,\"pageNo\",e)}}})],1)]:t._e(),t._v(\" \"),!t.tenementList.length&&t.total<=0?[n(\"m-no-data\")]:t._e(),t._v(\" \"),n(\"m-spin\",{attrs:{\"is-spin\":t.isLoading,\"is-left\":t.isLeft}})],2)],2)},a=[]},2302:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i})),n.d(e,\"b\",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"list-model\"},[n(\"div\",{staticClass:\"table-box\"},[n(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.list,size:\"mini\"}},[n(\"el-table-column\",{attrs:{type:\"index\",label:t.$t(\"#\"),width:\"50\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"tenantCode\",label:t.$t(\"OS Tenant Code\"),\"min-width\":\"100\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:t.$t(\"Description\"),\"min-width\":\"100\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",[t._v(t._s(t._f(\"filterNull\")(e.row.description)))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"queueName\",label:t.$t(\"Queue\"),\"min-width\":\"80\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:t.$t(\"Create Time\"),\"min-width\":\"120\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",[t._v(t._s(t._f(\"formatDate\")(e.row.createTime)))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:t.$t(\"Update Time\"),\"min-width\":\"120\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",[t._v(t._s(t._f(\"formatDate\")(e.row.updateTime)))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:t.$t(\"Operation\"),width:\"100\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-tooltip\",{attrs:{content:t.$t(\"Edit\"),placement:\"top\"}},[n(\"el-button\",{attrs:{type:\"primary\",size:\"mini\",icon:\"el-icon-edit-outline\",circle:\"\"},on:{click:function(n){return t._edit(e.row)}}})],1),t._v(\" \"),n(\"el-tooltip\",{attrs:{content:t.$t(\"Delete\"),placement:\"top\"}},[n(\"el-button\",{attrs:{type:\"danger\",size:\"mini\",icon:\"el-icon-delete\",circle:\"\"}}),t._v(\" \"),n(\"el-popconfirm\",{attrs:{confirmButtonText:t.$t(\"Confirm\"),cancelButtonText:t.$t(\"Cancel\"),icon:\"el-icon-info\",iconColor:\"red\",title:t.$t(\"Delete?\")},on:{onConfirm:function(n){return t._delete(e.row,e.row.id)}}},[n(\"el-button\",{attrs:{slot:\"reference\",type:\"danger\",size:\"mini\",icon:\"el-icon-delete\",circle:\"\"},slot:\"reference\"})],1)],1)]}}])})],1)],1)])},a=[]},2303:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i})),n.d(e,\"b\",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"m-popover\",{ref:\"popover\",attrs:{\"ok-text\":t.item?t.$t(\"Edit\"):t.$t(\"Submit\")},on:{ok:t._ok,close:t.close}},[n(\"template\",{slot:\"content\"},[n(\"div\",{staticClass:\"create-tenement-model\"},[n(\"m-list-box-f\",[n(\"template\",{slot:\"name\"},[n(\"strong\",[t._v(\"*\")]),t._v(t._s(t.$t(\"OS Tenant Code\")))]),t._v(\" \"),n(\"template\",{slot:\"content\"},[n(\"el-input\",{attrs:{type:\"input\",disabled:!!t.item,maxlength:\"60\",size:\"small\",placeholder:t.$t(\"Please enter os tenant code\")},model:{value:t.tenantCode,callback:function(e){t.tenantCode=e},expression:\"tenantCode\"}})],1)],2),t._v(\" \"),n(\"m-list-box-f\",[n(\"template\",{slot:\"name\"},[n(\"strong\",[t._v(\"*\")]),t._v(t._s(t.$t(\"Queue\")))]),t._v(\" \"),n(\"template\",{slot:\"content\"},[n(\"el-select\",{attrs:{size:\"small\"},model:{value:t.queueId,callback:function(e){t.queueId=e},expression:\"queueId\"}},t._l(t.queueList,(function(t){return n(\"el-option\",{key:t.id,attrs:{value:t.id,label:t.code}})})),1)],1)],2),t._v(\" \"),n(\"m-list-box-f\",[n(\"template\",{slot:\"name\"},[t._v(t._s(t.$t(\"Description\")))]),t._v(\" \"),n(\"template\",{slot:\"content\"},[n(\"el-input\",{attrs:{type:\"textarea\",size:\"small\",placeholder:t.$t(\"Please enter description\")},model:{value:t.description,callback:function(e){t.description=e},expression:\"description\"}})],1)],2)],1)])],2)},a=[]}}]);","extractedComments":[]}